package com.sswork.ngbook;

import android.annotation.SuppressLint;
import android.app.ListFragment;
import android.content.Context;
import android.util.AttributeSet;
import android.util.Log;
import android.widget.LinearLayout;
import android.widget.ListView;

import com.mobeta.android.dslv.DragSortListView;

@SuppressLint("NewApi")
public class BookList extends ListFragment {


	private ListView listview=null;
	
	private BookInfoAdapter adapter;


	private DragSortListView.DropListener onDrop = new DragSortListView.DropListener() {
		@Override
		public void drop(int from, int to) {
//			String item = adapter.getItem(from);
//
//			adapter.notifyDataSetChanged();
//			adapter.remove(item);
//			adapter.insert(item, to);
			Log.i("booklist", "drop");
		}
	};

	private DragSortListView.RemoveListener onRemove = new DragSortListView.RemoveListener() {
		@Override
		public void remove(int which) {
//			adapter.remove(adapter.getItem(which));
			Log.i("booklist", "drop");
		}
	};

	private DragSortListView.DragScrollProfile ssProfile = new DragSortListView.DragScrollProfile() {
		@Override
		public float getSpeed(float w, long t) {
			if (w > 0.8f) {
				// Traverse all views in a millisecond
				return ((float) adapter.getCount()) / 0.001f;
			} else {
				return 10.0f * w;
			}
		}
	};
	
	public BookList() {
		// TODO Auto-generated constructor stub
		super();
		Log.i("booklist", "new");
	}
	
	public void onCreate(android.os.Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		initView();
	};
	
	private void initView() {
		DragSortListView lv = (DragSortListView) getListView();
		lv.setDropListener(onDrop);
		lv.setRemoveListener(onRemove);
		lv.setDragScrollProfile(ssProfile);
		adapter=new BookInfoAdapter(getActivity());
		setListAdapter(adapter);
	}

}
